// FelixCode.c

void OLEDContrast(void)
{
	OLEDcreateBar();

	OLEDGotoPosition(3,0);
	OLEDPrintf("Use joystick!");
	OLEDGotoPosition(4,0);
	OLEDPrintf("Keep brightness?");
	OLEDGotoPosition(5,0);
	OLEDPrintf("Press r. button");

	OLEDcreateBar();

	while(!test_bit(PINB,PINB3))
	{
		joystickDriver();

		if(joystick_data.joystickPosition == UP && OLEDpos.column < 115)
		{
			write_c(0x81);
			write_c((++OLEDpos.brightness));
			write_d(0b11111111);
			OLEDGotoColumn(OLEDpos.column++);
		}
		else if(joystick_data.joystickPosition == DOWN && OLEDpos.column > 14 )
		{
			write_c(0x81);
			write_c(--OLEDpos.brightness);
			write_d(0b11000011);
			OLEDGotoColumn(OLEDpos.column--);
		}

		_delay_ms(200);
	}

}

void OLEDcreateBar(void)
{
	OLEDGotoPosition(7,12);
	write_d(0b11111111);
	write_d(0b11111111);
	for(int i = 0; i < 50; i++)
	{
		write_d(0b11111111);
	}
	for(int i = 0; i < 50; i++)
	{
		write_d(0b11000011);
	}

	write_d(0b11111111);
	write_d(0b11111111);

	OLEDGotoPosition(7,62);
}

// Update this function every time the timer interrupt triggers
void OLEDScoreCounter(void)
{
	OLEDGotoPosition(4, 44); // Go to approximately the middle of the screen
	OLEDPrintf("SCORE");
	OLEDGotoPosition(6,60);
	OLEDPrintf(gametimer); // Print the Score
}


// ************* FIREWORK ****************
const unsigned char PROGMEM firework1[9][16] = {
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b10000000,0b10000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b11000000,0b11000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b11100000,0b11100000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b11110000,0b11110000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b11111000,0b11111000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b11111100,0b11111100,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b11111110,0b11111110,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b11111111,0b11111111,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
};

const unsigned char PROGMEM firework2[6][16] = {
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b11110000,0b11110000,0b11110000,0b11110000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b01111000,0b01111000,0b01111000,0b01111000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b01111110,0b01111110,0b01111110,0b01111110,0b01111110,0b01111110,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b11111111,0b11111111,0b11111111,0b11100111,0b11100111,0b11111111,0b11111111,0b11111111,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b11111111,0b11111111,0b11000011,0b11000011,0b11000011,0b11000011,0b11111111,0b11111111,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b11111111,0b11111111,0b11000011,0b11000011,0b11000011,0b11000011,0b11111111,0b11111111,0b00000000,0b00000000,0b00000000,0b00000000},
};

const unsigned char PROGMEM firework3[11][16] = {
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00010000,0b00010000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00001000,0b00010000,0b00010000,0b00001000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000100,0b00001000,0b00010000,0b00010000,0b00001000,0b00000100,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00001000,0b00000100,0b00001000,0b00000000,0b00000000,0b00001000,0b00000100,0b00001000,0b00000000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00000000,0b00010000,0b00001000,0b00000100,0b00000000,0b00000000,0b00000000,0b00000000,0b00000100,0b00001000,0b00010000,0b00000000,0b00000000,0b00000000},
{0b00000000,0b00000000,0b00100000,0b00010000,0b00001000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00001000,0b00010000,0b00100000,0b00000000,0b00000000},
{0b00000000,0b01000000,0b00100000,0b00010000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00010000,0b00100000,0b01000000,0b00000000},
{0b10000000,0b01000000,0b00100000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00100000,0b01000000,0b10000000},
{0b10000000,0b01000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b01000000,0b10000000},
{0b10000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b10000000},
{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000},
};

void OLEDPrintFirework( void )
{
	for(int i = 0; i < 9, i++)
	{
		for(int j = 0; j < 16, j++)
		{
			write_d(pgm_read_byte(&(firework1[i][j])));
			_delay_ms(50);
		}
	}
}
